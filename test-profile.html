<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç –ø—Ä–æ—Ñ–∏–ª—è - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ [object Object]</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .test-container {
        max-width: 800px;
        width: 100%;
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .test-title {
        color: #fff;
        font-size: 2em;
        margin-bottom: 30px;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .test-scenarios {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .test-scenario {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .test-scenario h3 {
        color: #fff;
        margin-bottom: 15px;
        font-size: 1.2em;
      }

      .test-scenario p {
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 10px;
      }

      .test-btn {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        padding: 10px 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        margin: 5px;
      }

      .test-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }

      .test-result {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        margin-top: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .test-result h3 {
        color: #fff;
        margin-bottom: 15px;
      }

      .test-result pre {
        background: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 10px;
        color: #fff;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1 class="test-title">üß™ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è [object Object]</h1>

      <div class="test-scenarios">
        <div class="test-scenario">
          <h3>üìù –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ä–µ–∫—Ç fio</h3>
          <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –æ–±—ä–µ–∫—Ç–æ–º fio (first, last, middle)</p>
          <button class="test-btn" onclick="testScenario1()">
            –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </div>

        <div class="test-scenario">
          <h3>üìù –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ç—Ä–æ–∫–∞ fio</h3>
          <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ —Å—Ç—Ä–æ–∫–æ–π fio</p>
          <button class="test-btn" onclick="testScenario2()">
            –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </div>

        <div class="test-scenario">
          <h3>üìù –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–ª—å–∫–æ name</h3>
          <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ–ª—å–∫–æ —Å –ø–æ–ª–µ–º name</p>
          <button class="test-btn" onclick="testScenario3()">
            –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </div>

        <div class="test-scenario">
          <h3>üìù –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—É—Å—Ç–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
          <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –∏–º–µ–Ω–∏</p>
          <button class="test-btn" onclick="testScenario4()">
            –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </div>
      </div>

      <div class="test-result" id="test-result" style="display: none">
        <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:</h3>
        <pre id="test-output"></pre>
      </div>
    </div>

    <script>
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
      function getUserName(user) {
        if (!user) return '';

        // –ï—Å–ª–∏ fio - –æ–±—ä–µ–∫—Ç, —Å–æ–±–∏—Ä–∞–µ–º –ø–æ–ª–Ω–æ–µ –∏–º—è
        if (user.fio && typeof user.fio === 'object') {
          const { first = '', last = '', middle = '' } = user.fio;
          const nameParts = [first, middle, last].filter(
            (part) => part && part.trim()
          );
          return nameParts.join(' ').trim();
        }

        // –ï—Å–ª–∏ fio - —Å—Ç—Ä–æ–∫–∞
        if (user.fio && typeof user.fio === 'string') {
          return user.fio;
        }

        // –ï—Å–ª–∏ –µ—Å—Ç—å name
        if (user.name) {
          return user.name;
        }

        return '';
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      function showResult(title, user, result) {
        const resultDiv = document.getElementById('test-result');
        const outputDiv = document.getElementById('test-output');

        outputDiv.textContent = `${title}

–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
${JSON.stringify(user, null, 2)}

–†–µ–∑—É–ª—å—Ç–∞—Ç getUserName():
"${result}"

–°—Ç–∞—Ç—É—Å: ${result === '[object Object]' ? '‚ùå –û–®–ò–ë–ö–ê' : '‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û'}`;

        resultDiv.style.display = 'block';
        resultDiv.scrollIntoView({ behavior: 'smooth' });
      }

      // –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
      function testScenario1() {
        const user = {
          id: '1',
          fio: {
            first: '–ò–≤–∞–Ω',
            last: '–ò–≤–∞–Ω–æ–≤',
            middle: '–ò–≤–∞–Ω–æ–≤–∏—á',
          },
          email: 'ivan@example.com',
        };

        const result = getUserName(user);
        showResult('–°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ä–µ–∫—Ç fio', user, result);
      }

      function testScenario2() {
        const user = {
          id: '2',
          fio: '–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤',
          email: 'petr@example.com',
        };

        const result = getUserName(user);
        showResult('–°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ç—Ä–æ–∫–∞ fio', user, result);
      }

      function testScenario3() {
        const user = {
          id: '3',
          name: '–°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤',
          email: 'sergey@example.com',
        };

        const result = getUserName(user);
        showResult('–°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–ª—å–∫–æ name', user, result);
      }

      function testScenario4() {
        const user = {
          id: '4',
          email: 'empty@example.com',
        };

        const result = getUserName(user);
        showResult('–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—É—Å—Ç–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å', user, result);
      }

      // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±)
      function demonstrateOldProblem() {
        const user = {
          id: '5',
          fio: {
            first: '–ê–Ω–Ω–∞',
            last: '–ü–µ—Ç—Ä–æ–≤–∞',
            middle: '–°–µ—Ä–≥–µ–µ–≤–Ω–∞',
          },
          email: 'anna@example.com',
        };

        // –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π)
        const oldWay = user.fio || user.name || '';

        // –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π)
        const newWay = getUserName(user);

        const resultDiv = document.getElementById('test-result');
        const outputDiv = document.getElementById('test-output');

        outputDiv.textContent = `–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã:

–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
${JSON.stringify(user, null, 2)}

–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (user.fio || user.name || ''):
"${oldWay}"

–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (getUserName(user)):
"${newWay}"

–°—Ç–∞—Ç—É—Å: ${oldWay === '[object Object]' ? '‚ùå –ü–†–û–ë–õ–ï–ú–ê' : '‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û'}`;

        resultDiv.style.display = 'block';
        resultDiv.scrollIntoView({ behavior: 'smooth' });
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã
      document.addEventListener('DOMContentLoaded', () => {
        const scenariosDiv = document.querySelector('.test-scenarios');
        const problemDiv = document.createElement('div');
        problemDiv.className = 'test-scenario';
        problemDiv.innerHTML = `
                <h3>‚ö†Ô∏è –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã</h3>
                <p>–ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥–µ–ª —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±</p>
                <button class="test-btn" onclick="demonstrateOldProblem()">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É</button>
            `;
        scenariosDiv.appendChild(problemDiv);
      });
    </script>
  </body>
</html>
